(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d43a8"],{"5fab":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("d2-container",[i("div",{attrs:{slot:"header"},slot:"header"},[i("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.add}},[i("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 新增训练项目 ")])],1),i("el-table",{ref:"index",staticStyle:{width:"100%"},attrs:{data:e.data1,stripe:"",border:""}},[i("el-table-column",{attrs:{prop:"indexNO",label:"训练顺序"}}),i("el-table-column",{attrs:{prop:"sort",label:"训练名称"}}),i("el-table-column",{attrs:{prop:"time",label:"训练时长(s)"}}),i("el-table-column",{attrs:{prop:"target",label:"训练强度(个)"}}),i("el-table-column",{attrs:{prop:"rest",label:"休息时间(s)"}}),i("el-table-column",{attrs:{label:"操作",width:"365"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"success",icon:"el-icon-back"},on:{click:function(i){return e.insert(t.row.indexNO)}}},[e._v("插入训练内容")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.edit(t.row.indexNO,t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(i){return e.Delete(t.row)}}},[e._v("删除")])]}}])})],1),i("el-dialog",{attrs:{title:"新增训练项目",visible:e.addNewDialogVisible,width:"50vw","before-close":e.cancelSubmit},on:{"update:visible":function(t){e.addNewDialogVisible=t}}},[i("div",[i("el-form",{ref:"editProp",attrs:{model:e.editProp,rules:e.newRules,"label-width":"10vw"}},[i("el-form-item",{attrs:{label:"训练名称",prop:"sort"}},[i("el-select",{attrs:{placeholder:"请选择训练名称"},model:{value:e.editProp.sort,callback:function(t){e.$set(e.editProp,"sort",t)},expression:"editProp.sort"}},e._l(e.options,(function(e){return i("el-option",{key:e.sort,attrs:{label:e.sort,value:e.sort}})})),1)],1),i("el-form-item",{attrs:{label:"训练时长(s)",prop:"time"}},[i("el-input-number",{attrs:{min:1},model:{value:e.editProp.time,callback:function(t){e.$set(e.editProp,"time",t)},expression:"editProp.time"}})],1),i("el-form-item",{attrs:{label:"训练强度(个)",prop:"target"}},[i("el-input-number",{attrs:{min:1},model:{value:e.editProp.target,callback:function(t){e.$set(e.editProp,"target",t)},expression:"editProp.target"}})],1),i("el-form-item",{attrs:{label:"休息时间(s)",prop:"rest"}},[i("el-input-number",{attrs:{min:1},model:{value:e.editProp.rest,callback:function(t){e.$set(e.editProp,"rest",t)},expression:"editProp.rest"}})],1),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitPropForm("editProp")}}},[e._v("确定")]),i("el-button",{attrs:{size:"small"},on:{click:e.cancelSubmit}},[e._v("取消")])],1)],1)],1)]),i("el-dialog",{attrs:{title:"插入训练项目",visible:e.insertPropDialogVisible,width:"50vw","before-close":e.cancelSubmit},on:{"update:visible":function(t){e.insertPropDialogVisible=t}}},[i("div",[i("el-form",{ref:"editProp",attrs:{model:e.editProp,rules:e.newRules,"label-width":"10vw"}},[i("el-form-item",{attrs:{label:"训练名称",prop:"sort"}},[i("el-select",{attrs:{placeholder:"请选择训练名称"},model:{value:e.editProp.sort,callback:function(t){e.$set(e.editProp,"sort",t)},expression:"editProp.sort"}},e._l(e.options,(function(e){return i("el-option",{key:e.sort,attrs:{label:e.sort,value:e.sort}})})),1)],1),i("el-form-item",{attrs:{label:"训练时长(s)",prop:"time"}},[i("el-input-number",{attrs:{min:"1"},model:{value:e.editProp.time,callback:function(t){e.$set(e.editProp,"time",t)},expression:"editProp.time"}})],1),i("el-form-item",{attrs:{label:"训练强度(个)",prop:"target"}},[i("el-input-number",{attrs:{min:"1"},model:{value:e.editProp.target,callback:function(t){e.$set(e.editProp,"target",t)},expression:"editProp.target"}})],1),i("el-form-item",{attrs:{label:"休息时间(s)",prop:"rest"}},[i("el-input-number",{attrs:{min:"1"},model:{value:e.editProp.rest,callback:function(t){e.$set(e.editProp,"rest",t)},expression:"editProp.rest"}})],1),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitInsertForm("editProp")}}},[e._v("确定")]),i("el-button",{attrs:{size:"small"},on:{click:e.cancelSubmit}},[e._v("取消")])],1)],1)],1)]),i("el-dialog",{attrs:{title:"替换训练项目",visible:e.editPropDialogVisible,width:"50vw","before-close":e.handleClose},on:{"update:visible":function(t){e.editPropDialogVisible=t}}},[i("div",[i("el-form",{ref:"editProp",attrs:{model:e.editProp,rules:e.newRules,"label-width":"10vw"}},[i("el-form-item",{attrs:{label:"训练名称",prop:"sort"}},[i("el-select",{attrs:{placeholder:"请选择训练名称"},model:{value:e.editProp.sort,callback:function(t){e.$set(e.editProp,"sort",t)},expression:"editProp.sort"}},e._l(e.options,(function(e){return i("el-option",{key:e.sort,attrs:{label:e.sort,value:e.sort}})})),1)],1),i("el-form-item",{attrs:{label:"训练时长(s)",prop:"time"}},[i("el-input-number",{attrs:{min:1},model:{value:e.editProp.time,callback:function(t){e.$set(e.editProp,"time",t)},expression:"editProp.time"}})],1),i("el-form-item",{attrs:{label:"训练强度(个)",prop:"target"}},[i("el-input-number",{attrs:{min:1},model:{value:e.editProp.target,callback:function(t){e.$set(e.editProp,"target",t)},expression:"editProp.target"}})],1),i("el-form-item",{attrs:{label:"休息时间(s)",prop:"rest"}},[i("el-input-number",{attrs:{min:1},model:{value:e.editProp.rest,callback:function(t){e.$set(e.editProp,"rest",t)},expression:"editProp.rest"}})],1),i("el-form-item",[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitEditForm("editProp")}}},[e._v("确定")]),i("el-button",{attrs:{size:"small"},on:{click:e.cancelSubmit}},[e._v("取消")])],1)],1)],1)]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{float:"right"},attrs:{size:"medium",type:"success"},on:{click:function(t){return e.submitWQXPlan()}}},[i("i",{staticClass:"el-icon-s-promotion"}),e._v(" 提交训练处方 ")])],1)],1)},o=[],n=(i("d81d"),i("b64b"),i("96cf"),i("1da1")),a=i("22ce"),s=i("3df0"),l={name:"non-EquPlan-personalAdd",data:function(){return{editPropDialogVisible:!1,addNewDialogVisible:!1,insertPropDialogVisible:!1,editProp:{npId:this.$route.query.planId,indexNO:"",sort:"",time:"",target:"",rest:"",id:""},data1:[],value:"",newRules:{sort:[{required:!0,message:"请选择训练名称",trigger:"blur"}],time:[{required:!0,message:"请输入训练时长",trigger:"blur"}],target:[{required:!0,message:"请输入训练强度",trigger:"blur"}],rest:[{required:!0,message:"请输入休息时间",trigger:"blur"}]},options:[],Num:"",trainvideoId:""}},methods:{getTableData:function(){var e=this,t=this.$route.query.planId;this.$axios.post("/teacher/WQXPlanDetail/"+t,{pageSize:20,pageNum:1}).then((function(t){if(200===t.data.code){var i=t.data.data,r=Object.keys(i).map((function(e){return console.log(i),i[e]}));console.log(r),e.Num=r.length+1,console.log(e.Num),e.data1=r}})).catch()},getTrainingVideo:function(){var e=this;this.$axios.post("/teacher/page4VideoList",{pageSize:50,pageNum:1}).then((function(t){200===t.data.code&&(console.log(t.data.data.list),e.options=t.data.data.list)}))},getTrainingVideoID:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e.options){t.next=3;break}return t.next=3,e.$axios.post("/teacher/findTranVideos",{pageSize:50,pageNum:1,sort:e.editProp.sort}).then((function(e){200===e.data.code&&(i=e.data.data.list.map((function(e){return[e.id].valueOf()}))[0][0],console.log(i))}));case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})))()},add:function(){this.resetEditProp(),this.addNewDialogVisible=!0},insert:function(e){this.resetEditProp(),this.editProp.indexNO=e,this.insertPropDialogVisible=!0},edit:function(e,t){this.editProp={indexNO:e,sort:t.sort,time:t.time,target:t.target,rest:t.rest,id:t.id},this.editPropDialogVisible=!0},resetEditProp:function(){this.editProp.indexNO="",this.editProp.sort="",this.editProp.time="",this.editProp.target="",this.editProp.rest=""},cancelSubmit:function(){this.editPropDialogVisible=!1,this.addNewDialogVisible=!1,this.insertPropDialogVisible=!1,this.resetEditProp()},handleClose:function(){this.editPropDialogVisible=!1,this.addNewDialogVisible=!1,this.insertPropDialogVisible=!1},Delete:function(e){var t=this;s["a"].confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=t.$route.query.planId,r=e.indexNO;t.$axios.post("/teacher/deletePlanContent",{npId:i,indexNO:r}).then((function(e){t.getTableData(),t.$message({message:"删除成功",type:"success"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},submitPropForm:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.getTrainingVideoID().then((function(e){t.trainvideoId=e,console.log(t.trainvideoId)}));case 2:t.$refs[e].validate((function(e){if(e){var i=t.$route.query.planId;t.$axios.post("/teacher/addPlanContent",{npId:i,indexNO:t.Num,trainvideoId:t.trainvideoId,sort:t.editProp.sort,time:t.editProp.time,target:t.editProp.target,rest:t.editProp.rest}).then((function(e){200===e.data.code?(t.getTableData(),t.$message({message:"保存成功",type:"success"}),t.addNewDialogVisible=!1):t.$message({message:"已存在该内容！",type:"warning"})})).catch()}}));case 3:case"end":return i.stop()}}),i)})))()},submitInsertForm:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.getTrainingVideoID().then((function(e){t.trainvideoId=e,console.log(t.trainvideoId)}));case 2:t.$refs[e].validate((function(e){if(e){var i=t.$route.query.planId;t.$axios.post("/teacher/insertPlanContent",{npId:i,indexNO:t.editProp.indexNO+1,trainvideoId:t.trainvideoId,sort:t.editProp.sort,time:t.editProp.time,target:t.editProp.target,rest:t.editProp.rest}).then((function(e){200===e.data.code?(t.getTableData(),t.$message({message:"保存成功",type:"success"}),t.insertPropDialogVisible=!1):t.$message({message:"已存在该内容！",type:"warning"})})).catch()}}));case 3:case"end":return i.stop()}}),i)})))()},submitEditForm:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.getTrainingVideoID().then((function(e){t.trainvideoId=e,console.log(t.trainvideoId)}));case 2:t.$refs[e].validate((function(e){if(e){var i=t.$route.query.planId;t.$axios.post("/teacher/editPlanContent",{npId:i,indexNO:t.editProp.indexNO,trainvideoId:t.trainvideoId,sort:t.editProp.sort,time:t.editProp.time,target:t.editProp.target,rest:t.editProp.rest}).then((function(e){200===e.data.code?(t.getTableData(),t.$message({message:"保存成功",type:"success"}),t.editPropDialogVisible=!1):t.$message({message:"已存在该内容！",type:"warning"})})).catch()}}));case 3:case"end":return i.stop()}}),i)})))()},deleteWQXPlan:function(){var e=this;s["a"].confirm("确认清空训练内容?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.$route.query.planId;return Object(a["a"])({url:"/teacher/deleteWQXPlan/"+t,method:"get",data:{planId:t}}).then((function(){e.getTableData(),e.$message({message:"清空成功",type:"success"})}))})).catch((function(){e.$message({type:"info",message:"已取消清空"})}))},submitWQXPlan:function(){var e=this;s["a"].confirm("确认提交训练处方?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.$route.query.planId;return Object(a["a"])({url:"/teacher/submitWQXPlan/"+t,method:"post"}).then((function(){e.$message({message:"提交成功",type:"success"})}))})).catch((function(){e.$message({type:"info",message:"已取消提交"})}))}},created:function(){this.getTableData(),this.getTrainingVideo()}},d=l,c=i("2877"),u=Object(c["a"])(d,r,o,!1,null,null,null);t["default"]=u.exports}}]);